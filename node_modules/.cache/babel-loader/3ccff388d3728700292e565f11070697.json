{"ast":null,"code":"import _toConsumableArray from\"C:\\\\Users\\\\DELL\\\\Desktop\\\\\\u0645\\u0641\\u0627\\u0636\\u0644\\u0629\\\\react\\\\socialMediaAppN\\\\social-media-application\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\toConsumableArray.js\";import _asyncToGenerator from\"C:\\\\Users\\\\DELL\\\\Desktop\\\\\\u0645\\u0641\\u0627\\u0636\\u0644\\u0629\\\\react\\\\socialMediaAppN\\\\social-media-application\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";import _slicedToArray from\"C:\\\\Users\\\\DELL\\\\Desktop\\\\\\u0645\\u0641\\u0627\\u0636\\u0644\\u0629\\\\react\\\\socialMediaAppN\\\\social-media-application\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\slicedToArray.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\DELL\\\\Desktop\\\\\\u0645\\u0641\\u0627\\u0636\\u0644\\u0629\\\\react\\\\socialMediaAppN\\\\social-media-application\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import{FaRegImages}from\"react-icons/fa\";import{TiDeleteOutline}from\"react-icons/ti\";import{useState}from\"react\";import{sendRequest}from\"../utils/sendRequestion\";import{useEffect,useRef}from\"react\";import firebase from\"../firebase/firebase\";import moment from\"moment\";import*as React from\"react\";import IconButton from\"@mui/material/IconButton\";import Menu from\"@mui/material/Menu\";import MenuItem from\"@mui/material/MenuItem\";import MoreVertIcon from\"@mui/icons-material/MoreVert\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var BrowsingPage=function BrowsingPage(props){var fullname=props.fullname,id=props.id;var _useState=useState(),_useState2=_slicedToArray(_useState,2),url=_useState2[0],setUrl=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),image=_useState4[0],setImage=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),text=_useState6[0],setText=_useState6[1];var _useState7=useState([{fullName:\"hani\"},{fullName:\"hani\"},{fullName:\"hani\"},{fullName:\"hani\"}]),_useState8=_slicedToArray(_useState7,2),posts=_useState8[0],setPosts=_useState8[1];var _useState9=useState(),_useState10=_slicedToArray(_useState9,2),savePostId=_useState10[0],setSavePostId=_useState10[1];useEffect(function(){var getPostFather=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var getPost;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return sendRequest(\"getPost\",{hello:\"hello\"},\"post\");case 2:getPost=_context.sent;setPosts(getPost);// console.log(posts);\nconsole.log(\"isnt work  \");case 5:case\"end\":return _context.stop();}}},_callee);}));return function getPostFather(){return _ref.apply(this,arguments);};}();getPostFather();},[]);// setCopyPast(posts);\n// const postss = posts;\nvar sendPost=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var sendUserInformations;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!(!url&&!text)){_context2.next=2;break;}return _context2.abrupt(\"return\");case 2:// console.log(url);\n// console.log(\"sendPost\");\n// const getUserImage = await sendRequest(\"getImage\", { id: id }, \"post\");\n// console.log(getUserImage.image);\n// if (text && url) {\nsetPosts([].concat(_toConsumableArray(posts),[{fullName:fullname,postImage:url,text:text,date:moment().toDate(),userImage:'Arrow.jpg'}]));sendUserInformations=sendRequest(\"savePost\",{fullName:fullname,postImage:url,text:text,userImage:'Arrow.jpg'},\"post\");setUrl(\"\");setText(\"\");setImage(\"\");console.log(image);case 8:case\"end\":return _context2.stop();}}},_callee2);}));return function sendPost(){return _ref2.apply(this,arguments);};}();var handleUpload=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var file,storage,storageRef,uploadTask,onUploading;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:if(!(text&&!image)){_context3.next=3;break;}sendPost();return _context3.abrupt(\"return\");case 3:file=image;storage=firebase.storage();storageRef=storage.ref();uploadTask=storageRef.child(\"iamges/\"+file.name).put(file);_context3.next=9;return uploadTask.on(firebase.storage.TaskEvent.STATE_CHANGED,function(snapshot){var progress=Math.round(snapshot.bytesTransferred/snapshot.totalBytes)*100;console.log({progress:progress});},function(err){throw err;},function(){uploadTask.snapshot.ref.getDownloadURL().then(function(url){setUrl(url);console.log(url);});});case 9:onUploading=_context3.sent;case 10:case\"end\":return _context3.stop();}}},_callee3);}));return function handleUpload(){return _ref3.apply(this,arguments);};}();useEffect(function(){sendPost();},[url]);console.log();var myRef=useRef(null);var executeScroll=function executeScroll(){return myRef.current.scrollIntoView();};console.log({image:image});var options=[\"delet\"];var ITEM_HEIGHT=48;var _React$useState=React.useState(null),_React$useState2=_slicedToArray(_React$useState,2),anchorEl=_React$useState2[0],setAnchorEl=_React$useState2[1];var open=Boolean(anchorEl);var handleClick=function handleClick(event){setAnchorEl(event.currentTarget);};var _useState11=useState(1),_useState12=_slicedToArray(_useState11,2),test=_useState12[0],setTest=_useState12[1];var handleClose=function handleClose(e){setAnchorEl(null);console.log(posts);console.log(e);var remove=posts.filter(function(item){return item._id!==savePostId;});console.log(remove);setPosts(remove);console.log(remove);};// console.log(posts);\nvar getPostId=function getPostId(e){setSavePostId(e);};return/*#__PURE__*/_jsxs(\"div\",{className:\"browsingPageFather\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"forSendingPost\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"postTextImage\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"./images/Arrow.jpg\",className:\"postImage\"}),image?/*#__PURE__*/_jsxs(\"div\",{children:[\" \",/*#__PURE__*/_jsx(\"img\",{className:\"previewImage\",id:\"blah\",src:URL.createObjectURL(image)}),/*#__PURE__*/_jsx(TiDeleteOutline,{onClick:function onClick(){setImage(undefined);}})]}):null]}),/*#__PURE__*/_jsx(\"div\",{className:\"SearchForPost\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"post some thing\",className:\"postSearch\",onChange:function onChange(e){setText(e.target.value);},value:text})}),/*#__PURE__*/_jsx(\"div\",{className:\"iconGetFile\",children:/*#__PURE__*/_jsxs(\"label\",{className:\"filebutton\",children:[/*#__PURE__*/_jsx(FaRegImages,{}),/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",id:\"myfile\",name:\"myfile\",accept:\"image/*\",onChange:function onChange(e){setImage(e.target.files[0]);}// value={image}\n}),/*#__PURE__*/_jsx(\"img\",{id:\"output\"})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"sendPost\",onClick:function onClick(){handleUpload();},children:/*#__PURE__*/_jsx(\"p\",{className:\"postItString\",children:\"post it!\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"ref\",ref:myRef,children:posts.map(function(e){return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"postFather\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"personalInformationP\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"postImageName\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"image\",children:/*#__PURE__*/_jsx(\"img\",{src:e.userImage==\"Arrow.jpg\"?\"./images/Arrow.jpg\":e.userImage,className:\"postImageP\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"namedate\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"userName\",children:e.fullName}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"span\",{className:\"postTime\",children:moment(e.date).fromNow()})]})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"optionIcon\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(IconButton,{\"aria-label\":\"more\",id:\"long-button\",\"aria-controls\":open?\"long-menu\":undefined,\"aria-expanded\":open?\"true\":undefined,\"aria-haspopup\":\"true\",onClick:handleClick,children:/*#__PURE__*/_jsx(MoreVertIcon,{onClick:function onClick(){getPostId(e._id);}})}),/*#__PURE__*/_jsx(Menu,{id:\"long-menu\",MenuListProps:{\"aria-labelledby\":\"long-button\"},anchorEl:anchorEl,open:open,onClose:handleClose,PaperProps:{style:{maxHeight:ITEM_HEIGHT*4.5,width:\"20ch\"}},children:/*#__PURE__*/_jsx(MenuItem,{onClick:function onClick(){return handleClose(e._id);},children:\"delet\"})})]})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"postText\",children:e.text?/*#__PURE__*/_jsx(\"p\",{children:e.text}):null}),/*#__PURE__*/_jsxs(\"div\",{children:[\" \",e.postImage?/*#__PURE__*/_jsx(\"img\",{src:e.postImage,className:\"Imagespost\"}):null]})]})});})})]});};export default BrowsingPage;","map":{"version":3,"sources":["C:/Users/DELL/Desktop/مفاضلة/react/socialMediaAppN/social-media-application/src/components/BrowsingPage.tsx"],"names":["FaRegImages","TiDeleteOutline","useState","sendRequest","useEffect","useRef","firebase","moment","React","IconButton","Menu","MenuItem","MoreVertIcon","BrowsingPage","props","fullname","id","url","setUrl","image","setImage","text","setText","fullName","posts","setPosts","savePostId","setSavePostId","getPostFather","hello","getPost","console","log","sendPost","postImage","date","toDate","userImage","sendUserInformations","handleUpload","file","storage","storageRef","ref","uploadTask","child","name","put","on","TaskEvent","STATE_CHANGED","snapshot","progress","Math","round","bytesTransferred","totalBytes","err","getDownloadURL","then","onUploading","myRef","executeScroll","current","scrollIntoView","options","ITEM_HEIGHT","anchorEl","setAnchorEl","open","Boolean","handleClick","event","currentTarget","test","setTest","handleClose","e","remove","filter","item","_id","getPostId","URL","createObjectURL","undefined","target","value","files","map","fromNow","style","maxHeight","width"],"mappings":"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","sourcesContent":["import { FaRegImages } from \"react-icons/fa\";\r\nimport { AiOutlineSend } from \"react-icons/ai\";\r\nimport { TiDeleteOutline } from \"react-icons/ti\";\r\nimport { FaEllipsisV } from \"react-icons/fa\";\r\nimport { useState } from \"react\";\r\nimport { sendRequest } from \"../utils/sendRequestion\";\r\nimport react, { useEffect, useRef } from \"react\";\r\nimport firebase from \"../firebase/firebase\";\r\nimport { async } from \"@firebase/util\";\r\nimport moment from \"moment\";\r\n\r\nimport * as React from \"react\";\r\nimport IconButton from \"@mui/material/IconButton\";\r\nimport Menu from \"@mui/material/Menu\";\r\nimport MenuItem from \"@mui/material/MenuItem\";\r\nimport MoreVertIcon from \"@mui/icons-material/MoreVert\";\r\n\r\ninterface Props {\r\n  fullname: string | null;\r\n  id: any | null;\r\n}\r\n\r\nconst BrowsingPage = (props: Props) => {\r\n  const { fullname, id } = props;\r\n  const [url, setUrl] = useState<any>();\r\n  const [image, setImage] = useState<any>();\r\n  const [text, setText] = useState<any>();\r\n  const [posts, setPosts] = useState<any>([\r\n    { fullName: \"hani\" },\r\n    { fullName: \"hani\" },\r\n    { fullName: \"hani\" },\r\n    { fullName: \"hani\" },\r\n  ]);\r\n\r\n  const [savePostId, setSavePostId] = useState();\r\n\r\n  useEffect(() => {\r\n    const getPostFather = async () => {\r\n      const getPost = await sendRequest(\"getPost\", { hello: \"hello\" }, \"post\");\r\n      setPosts(getPost);\r\n      // console.log(posts);\r\n      console.log(\"isnt work  \");\r\n    };\r\n    getPostFather();\r\n  }, []);\r\n\r\n  // setCopyPast(posts);\r\n\r\n  // const postss = posts;\r\n\r\n  const sendPost = async () => {\r\n    if (!url && !text) {\r\n      return;\r\n    }\r\n\r\n    // console.log(url);\r\n    // console.log(\"sendPost\");\r\n    // const getUserImage = await sendRequest(\"getImage\", { id: id }, \"post\");\r\n    // console.log(getUserImage.image);\r\n\r\n    // if (text && url) {\r\n\r\n      setPosts([\r\n        ...posts,\r\n        {\r\n          fullName: fullname,\r\n          postImage: url,\r\n          text: text,\r\n          date: moment().toDate(),\r\n          userImage: 'Arrow.jpg',\r\n        },\r\n      ]);\r\n\r\n\r\n\r\n    const sendUserInformations = sendRequest(\r\n      \"savePost\",\r\n      {\r\n        fullName: fullname,\r\n        postImage: url,\r\n        text: text,\r\n        userImage: 'Arrow.jpg',\r\n      },\r\n      \"post\"\r\n    );\r\n\r\n    setUrl(\"\");\r\n    setText(\"\");\r\n    setImage(\"\");\r\n    console.log(image)\r\n  };\r\n\r\n  const handleUpload = async () => {\r\n    if (text && !image) {\r\n      sendPost();\r\n      return;\r\n    }\r\n\r\n    let file = image;\r\n\r\n    const storage = firebase.storage();\r\n    const storageRef = storage.ref();\r\n\r\n    const uploadTask = storageRef.child(\"iamges/\" + file.name).put(file);\r\n\r\n    const onUploading = await uploadTask.on(\r\n      firebase.storage.TaskEvent.STATE_CHANGED,\r\n      (snapshot: any) => {\r\n        const progress =\r\n          Math.round(snapshot.bytesTransferred / snapshot.totalBytes) * 100;\r\n        console.log({ progress });\r\n      },\r\n      (err: any) => {\r\n        throw err;\r\n      },\r\n      () => {\r\n        uploadTask.snapshot.ref.getDownloadURL().then((url: any) => {\r\n          setUrl(url);\r\n          console.log(url);\r\n        });\r\n      }\r\n    );\r\n  };\r\n\r\n  useEffect(() => {\r\n    sendPost();\r\n  }, [url]);\r\n\r\n  console.log();\r\n\r\n  const myRef: any = useRef(null);\r\n\r\n  const executeScroll = () => myRef.current.scrollIntoView();\r\n\r\n  console.log({ image });\r\n\r\n  const options = [\"delet\"];\r\n\r\n  const ITEM_HEIGHT = 48;\r\n\r\n  const [anchorEl, setAnchorEl] = React.useState<null | HTMLElement>(null);\r\n  const open = Boolean(anchorEl);\r\n  const handleClick = (event: React.MouseEvent<HTMLElement>) => {\r\n    setAnchorEl(event.currentTarget);\r\n  };\r\n\r\n  const [test, setTest] = useState<any>(1);\r\n  const handleClose = (e: any) => {\r\n    setAnchorEl(null);\r\n    console.log(posts);\r\n    console.log(e);\r\n    const remove = posts.filter((item: any) => item._id !== savePostId);\r\n    console.log(remove);\r\n    setPosts(remove);\r\n    console.log(remove);\r\n  };\r\n\r\n  // console.log(posts);\r\n\r\n  const getPostId = (e: any) => {\r\n    setSavePostId(e);\r\n  };\r\n\r\n  return (\r\n    <div className=\"browsingPageFather\">\r\n      <div className=\"forSendingPost\">\r\n        <div className=\"postTextImage\">\r\n          <img src=\"./images/Arrow.jpg\" className=\"postImage\" />\r\n\r\n          {image ? (\r\n            <div>\r\n              {\" \"}\r\n              <img\r\n                className=\"previewImage\"\r\n                id=\"blah\"\r\n                src={URL.createObjectURL(image)}\r\n              />\r\n              <TiDeleteOutline\r\n                onClick={() => {\r\n                  setImage(undefined);\r\n                }}\r\n              />\r\n            </div>\r\n          ) : null}\r\n        </div>\r\n        <div className=\"SearchForPost\">\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"post some thing\"\r\n            className=\"postSearch\"\r\n            onChange={(e) => {\r\n              setText(e.target.value);\r\n            }}\r\n            value={text}\r\n          />\r\n        </div>\r\n\r\n        <div className=\"iconGetFile\">\r\n          <label className=\"filebutton\">\r\n            <FaRegImages />\r\n            <span>\r\n              <input\r\n                type=\"file\"\r\n                id=\"myfile\"\r\n                name=\"myfile\"\r\n                accept=\"image/*\"\r\n                onChange={(e) => {\r\n                  setImage(e.target.files![0]);\r\n                }}\r\n                // value={image}\r\n              />\r\n              <img id=\"output\" />\r\n            </span>\r\n          </label>\r\n        </div>\r\n\r\n        <div\r\n          className=\"sendPost\"\r\n          onClick={() => {\r\n            handleUpload();\r\n          }}\r\n        >\r\n          <p className=\"postItString\">post it!</p>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"ref\" ref={myRef}>\r\n        {posts.map((e: any) => (\r\n          <div>\r\n            {/* <div>{e._id}</div> */}\r\n            {/* {  <button className=\"deletingAPost\" onClick={()=>{}}>Delet the post</button>} */}\r\n            <div className=\"postFather\">\r\n              <div className=\"personalInformationP\">\r\n                <div className=\"postImageName\">\r\n                  <div className=\"image\">\r\n                    <img\r\n                      src={\r\n                        e.userImage == \"Arrow.jpg\"\r\n                          ? \"./images/Arrow.jpg\"\r\n                          : e.userImage\r\n                      }\r\n                      className=\"postImageP\"\r\n                    />\r\n                  </div>\r\n                  <div className=\"namedate\">\r\n                    <div>\r\n                      <span className=\"userName\">{e.fullName}</span>\r\n                      <br></br>\r\n                      <span className=\"postTime\">\r\n                        {moment(e.date).fromNow()}\r\n                      </span>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"optionIcon\">\r\n                  <div>\r\n                    <IconButton\r\n                      aria-label=\"more\"\r\n                      id=\"long-button\"\r\n                      aria-controls={open ? \"long-menu\" : undefined}\r\n                      aria-expanded={open ? \"true\" : undefined}\r\n                      aria-haspopup=\"true\"\r\n                      onClick={handleClick}\r\n                    >\r\n                      <MoreVertIcon\r\n                        onClick={() => {\r\n                          getPostId(e._id);\r\n                        }}\r\n                      />\r\n                    </IconButton>\r\n                    <Menu\r\n                      id=\"long-menu\"\r\n                      MenuListProps={{\r\n                        \"aria-labelledby\": \"long-button\",\r\n                      }}\r\n                      anchorEl={anchorEl}\r\n                      open={open}\r\n                      onClose={handleClose}\r\n                      PaperProps={{\r\n                        style: {\r\n                          maxHeight: ITEM_HEIGHT * 4.5,\r\n                          width: \"20ch\",\r\n                        },\r\n                      }}\r\n                    >\r\n                      {/* {options.map((option) => ( */}\r\n\r\n                      <MenuItem onClick={() => handleClose(e._id)}>\r\n                        delet\r\n                      </MenuItem>\r\n\r\n                      {/* ))} */}\r\n                    </Menu>\r\n                  </div>\r\n                  {/* <FaEllipsisV /> */}\r\n                </div>\r\n              </div>\r\n              <div className=\"postText\">{e.text ? <p>{e.text}</p> : null}</div>\r\n\r\n              <div>\r\n                {\" \"}\r\n                {e.postImage ? (\r\n                  <img src={e.postImage} className=\"Imagespost\" />\r\n                ) : null}\r\n              </div>\r\n\r\n              {/* <img src=\"./images/Arrow.jpg\" /> */}\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default BrowsingPage;\r\n"]},"metadata":{},"sourceType":"module"}